@using projetoTP3_A2.Models.Enum
@model projetoTP3_A2.Models.MedicamentoProntuario
@{
    ViewData["Title"] = "Detalhes da Prescrição";
}

<div class="container mt-4">
    <h2 class="text-success fw-bold mb-4">
        <i class="bi bi-file-medical me-2"></i> @ViewData["Title"]
    </h2>

    <div class="card shadow-sm border-0">
        <div class="card-body">
            <dl class="row">
                <dt class="col-sm-3">Paciente</dt>
                <dd class="col-sm-9">@Model.Prontuario.Paciente.Nome</dd>

                <dt class="col-sm-3">Médico</dt>
                <dd class="col-sm-9">@Model.Prontuario.Medico.Nome</dd>

                <dt class="col-sm-3">Medicamento</dt>
                <dd class="col-sm-9">@Model.Medicamento.Nome</dd>

                <dt class="col-sm-3">Dosagem</dt>
                <dd class="col-sm-9">@Model.Dosagem</dd>

                <dt class="col-sm-3">Frequência</dt>
                <dd class="col-sm-9">@Model.Frequencia</dd>

                <dt class="col-sm-3">Observações</dt>
                <dd class="col-sm-9">@Model.Observacoes</dd>

                <dt class="col-sm-3">Status</dt>
                <dd class="col-sm-9">
                    <span class="badge @(Model.Status == PrescricaoStatus.Pendente ? "bg-warning" : "bg-secondary")">
                        @Model.Status
                    </span>
                </dd>
            </dl>

            @if (Model.Status == PrescricaoStatus.Pendente)
            {
                <form asp-controller="Farmaceutico" asp-action="DarBaixa" method="post" class="mt-3">
                    <input type="hidden" name="id" value="@Model.Id" />

                    <div class="btn-group" role="group">
                        <button type="submit" name="novoStatus" value="Liquidado" class="btn btn-success">
                            <i class="bi bi-check-circle me-1"></i> Liquidar
                        </button>
                        <button type="submit" name="novoStatus" value="Cancelado" class="btn btn-danger">
                            <i class="bi bi-x-circle me-1"></i> Cancelar
                        </button>
                    </div>
                </form>
            }
            else
            {
                <div class="alert alert-info mt-3">
                    <i class="bi bi-info-circle me-1"></i> Esta prescrição já foi utilizada e não pode ser alterada.
                </div>
            }
        </div>
    </div>
</div>